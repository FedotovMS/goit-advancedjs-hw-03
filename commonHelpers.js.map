{"version":3,"file":"commonHelpers.js","sources":["../src/cats-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_dSKOi2g6r5Z5MXH90zLdHueXv61ZIwwb7sExKgfYdJ0iHORzscUt4tqpFuOZVH5w';\nexport async function fetchBreeds() {\n  return axios.get(`https://api.thecatapi.com/v1/breeds`).then(res => res.data);\n}\n\nexport async function fetchBreedById(breedId) {\n  return axios\n    .get(`https://api.thecatapi.com/v1/images/search?breed_ids=${breedId}`)\n    .then(res => res.data[0]);\n}\n","import { fetchBreeds, fetchBreedById } from './cats-api';\nimport iziToast from 'izitoast';\nimport SlimSelect from 'slim-select';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '../node_modules/slim-select/dist/slimselect.css';\n\nconst breedSelector = document.querySelector('.breed-select');\nconst loader = document.querySelector('.loader');\nconst catInfo = document.querySelector('.cat-info');\n\nconst select = new SlimSelect({\n  select: breedSelector,\n});\n\nselect.disable();\n// breedSelector.disabled = true;\n\ngetBreedsData();\n\nasync function getBreedsData() {\n  const breeds = await fetchBreeds()\n    .then(data => {\n      const breeds = {};\n      data.map(breed => (breeds[breed.name] = breed.id));\n      return breeds;\n    })\n    .catch(error);\n\n  const options = [\n    {\n      text: 'Choose breed',\n      value: 'none',\n    },\n\n    ...Object.keys(breeds).map(breed => {\n      return { text: breed, value: breeds[breed] };\n    }),\n  ];\n  select.setData(options);\n  select.enable();\n  toggleLoader(false);\n}\n\nbreedSelector.addEventListener('change', onSelect);\n\nasync function onSelect(e) {\n  if (e.target.value === 'none') {\n    catInfo.innerHTML = '';\n    return;\n  }\n  toggleLoader();\n  console.log(e.currentTarget.value);\n  await fetchBreedById(e.currentTarget.value)\n    .then(createMarkup)\n    .catch(error)\n    .finally(() => toggleLoader(false));\n}\n\nfunction createMarkup(data) {\n  const imgUrl = data.url;\n  const breedInfo = data.breeds[0];\n  catInfo.innerHTML = `\n    <h2 class='cat-title'>${breedInfo.name}</h2>\n    <div class=\"cat-info-box\">\n      <img src=\"${imgUrl}\" alt=\"${breedInfo.name}\" width='600'>\n      <div class=\"cat-info-text\">\n        <p>${breedInfo.description}</p>\n        <ul>\n          <li><b>Life Span:</b> ${breedInfo.life_span}</li>\n          <li><b>Temperament:</b> ${breedInfo.temperament}</li>\n        </ul>\n      </div>\n    </div>\n  `;\n}\n\nfunction toggleLoader(show = true) {\n  loader.style.display = show ? 'block' : 'none';\n}\n\nfunction error(err) {\n  iziToast.error({\n    title: 'Error',\n    titleColor: 'white',\n    message: err.message,\n    messageColor: 'white',\n    position: 'topRight',\n    close: false,\n    closeOnClick: true,\n    progressBarColor: 'red',\n    icon: null,\n    messageSize: 20,\n    timeout: 2000,\n  });\n  catInfo.innerHTML = '';\n}\n"],"names":["axios","fetchBreeds","res","fetchBreedById","breedId","breedSelector","loader","catInfo","select","SlimSelect","getBreedsData","breeds","data","breed","error","options","toggleLoader","onSelect","createMarkup","imgUrl","breedInfo","show","err","iziToast"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEACK,eAAeC,GAAc,CAClC,OAAOD,EAAM,IAAI,qCAAqC,EAAE,KAAKE,GAAOA,EAAI,IAAI,CAC9E,CAEO,eAAeC,EAAeC,EAAS,CAC5C,OAAOJ,EACJ,IAAI,wDAAwDI,GAAS,EACrE,KAAKF,GAAOA,EAAI,KAAK,EAAE,CAC5B,CCNA,MAAMG,EAAgB,SAAS,cAAc,eAAe,EACtDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAE5CC,EAAS,IAAIC,EAAW,CAC5B,OAAQJ,CACV,CAAC,EAEDG,EAAO,QAAO,EAGdE,IAEA,eAAeA,GAAgB,CAC7B,MAAMC,EAAS,MAAMV,EAAa,EAC/B,KAAKW,GAAQ,CACZ,MAAMD,EAAS,CAAA,EACf,OAAAC,EAAK,IAAIC,GAAUF,EAAOE,EAAM,MAAQA,EAAM,EAAG,EAC1CF,CACb,CAAK,EACA,MAAMG,CAAK,EAERC,EAAU,CACd,CACE,KAAM,eACN,MAAO,MACR,EAED,GAAG,OAAO,KAAKJ,CAAM,EAAE,IAAIE,IAClB,CAAE,KAAMA,EAAO,MAAOF,EAAOE,IACrC,CACL,EACEL,EAAO,QAAQO,CAAO,EACtBP,EAAO,OAAM,EACbQ,EAAa,EAAK,CACpB,CAEAX,EAAc,iBAAiB,SAAUY,CAAQ,EAEjD,eAAeA,EAAS,EAAG,CACzB,GAAI,EAAE,OAAO,QAAU,OAAQ,CAC7BV,EAAQ,UAAY,GACpB,MACD,CACDS,IACA,QAAQ,IAAI,EAAE,cAAc,KAAK,EACjC,MAAMb,EAAe,EAAE,cAAc,KAAK,EACvC,KAAKe,CAAY,EACjB,MAAMJ,CAAK,EACX,QAAQ,IAAME,EAAa,EAAK,CAAC,CACtC,CAEA,SAASE,EAAaN,EAAM,CAC1B,MAAMO,EAASP,EAAK,IACdQ,EAAYR,EAAK,OAAO,GAC9BL,EAAQ,UAAY;AAAA,4BACMa,EAAU;AAAA;AAAA,kBAEpBD,WAAgBC,EAAU;AAAA;AAAA,aAE/BA,EAAU;AAAA;AAAA,kCAEWA,EAAU;AAAA,oCACRA,EAAU;AAAA;AAAA;AAAA;AAAA,GAK9C,CAEA,SAASJ,EAAaK,EAAO,GAAM,CACjCf,EAAO,MAAM,QAAUe,EAAO,QAAU,MAC1C,CAEA,SAASP,EAAMQ,EAAK,CAClBC,EAAS,MAAM,CACb,MAAO,QACP,WAAY,QACZ,QAASD,EAAI,QACb,aAAc,QACd,SAAU,WACV,MAAO,GACP,aAAc,GACd,iBAAkB,MAClB,KAAM,KACN,YAAa,GACb,QAAS,GACb,CAAG,EACDf,EAAQ,UAAY,EACtB"}